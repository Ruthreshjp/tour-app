import { 
  createBrowserRouter,
  createRoutesFromElements,
  Route,
  Navigate
} from "react-router-dom";
import ErrorBoundary from "./pages/components/ErrorBoundary";
import NotFound from "./pages/components/NotFound";
import Home from "./pages/Home";
import Signup from "./pages/Signup";
import Login from "./pages/Login";
import Profile from "./pages/Profile";
import About from "./pages/About";
import PrivateRoute from "./pages/Routes/PrivateRoute";
import BusinessPrivateRoute from "./pages/Routes/BusinessPrivateRoute";
import AdminDashboard from "./pages/admin/AdminDashboard";
import UpdatePackage from "./pages/admin/UpdatePackage";
import Package from "./pages/Package";
import Search from "./pages/Search";
import Blog from "./pages/Blog";
import Contact from "./pages/Contact";
import RatingsPage from "./pages/RatingsPage";
import Booking from "./pages/user/Booking";
import BusinessSignup from "./pages/business/BusinessSignup";
import BusinessLogin from "./pages/business/BusinessLogin";
import BusinessSetup from "./pages/business/BusinessSetup";
import DashboardRouter from "./pages/business/dashboards/DashboardRouter";
import BusinessListings from "./pages/business/BusinessListings";
import BusinessProfile from "./pages/business/BusinessProfile";
import BusinessBookings from "./pages/business/BusinessBookings";
import BusinessViews from "./pages/business/BusinessViews";
import TravelOwn from "./pages/TravelOwn/TravelOwn";
import Hotels from "./pages/TravelOwn/Hotels";
import Restaurants from "./pages/TravelOwn/Restaurants";
import Shopping from "./pages/TravelOwn/Shopping";
import Cab from "./pages/TravelOwn/Cab";
import CabBooking from "./pages/TravelOwn/CabBooking";
import Cafe from "./pages/TravelOwn/Cafe";
import RootLayout from "./pages/components/RootLayout";

export const router = createBrowserRouter(
  createRoutesFromElements(
    <Route path="/" element={<RootLayout />} errorElement={<ErrorBoundary />}>
      <Route index element={<Home />} />
      <Route path="login" element={<Login />} />
      <Route path="signup" element={<Signup />} />
      <Route path="search" element={<Search />} />
      <Route path="blog" element={<Blog />} />
      <Route path="contact" element={<Contact />} />
      <Route path="about" element={<About />} />
      
      {/* Business routes */}
      <Route path="business" errorElement={<ErrorBoundary />}>
        <Route path="login" element={<BusinessLogin />} />
        <Route path="signup" element={<BusinessSignup />} />
        <Route element={<BusinessPrivateRoute />}>
          <Route path="setup" element={<BusinessSetup />} />
          <Route path="dashboard" element={<DashboardRouter />} />
          <Route path="profile" element={<BusinessProfile />} />
          <Route path="listings" element={<BusinessListings />} />
          <Route path="bookings" element={<BusinessBookings />} />
        </Route>
      </Route>
      
      {/* Travel routes */}
      <Route path="travel-own" element={<TravelOwn />} errorElement={<ErrorBoundary />}>
        <Route index element={<Hotels />} />
        <Route path="hotels" element={<Hotels />} />
        <Route path="restaurants" element={<Restaurants />} />
        <Route path="shopping" element={<Shopping />} />
        <Route path="cab" element={<Cab />} />
        <Route path="cab/:id/book" element={<CabBooking />} />
        <Route path="cafe" element={<Cafe />} />
      </Route>

      {/* Profile routes */}
      <Route element={<PrivateRoute />} errorElement={<ErrorBoundary />}>
        <Route path="profile/user" element={<Profile />} />
        <Route path="profile/admin" element={<AdminDashboard />} />
        <Route path="profile/admin/update-package/:id" element={<UpdatePackage />} />
      </Route>

      {/* Package routes */}
      <Route path="package" errorElement={<ErrorBoundary />}>
        <Route path=":id" element={<Package />} />
        <Route path=":id/ratings" element={<RatingsPage />} />
        <Route element={<PrivateRoute />}>
          <Route path=":id/book" element={<Booking />} />
        </Route>
      </Route>

      {/* 404 and Redirect routes */}
      <Route path="404" element={<NotFound />} />
      <Route path="*" element={<Navigate to="/404" replace />} />
    </Route>
  ),
  {
    future: {
      v7_startTransition: true,
      v7_normalizeFormMethod: true
    }
  }
);